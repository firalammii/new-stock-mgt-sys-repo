name:
  CI-CD-pipeline

on:
  push:
    branches:
      - main

jobs:
  CI:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set Up JDK 11
        uses: actions/setup-java@v2
        with:
          java-version: '11'
          distribution: 'adopt'
      -name: Build With Maven
      run: mvn--batch-mode --update-snapshots verify
  CD:
    needs: CI
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: akhileshns/heroku-deploy@v3.12.12
      with:
        heroku_api_key: ${{secrets.HEROKU_API_KEY}}
        heroku_app_name: "stock-management-system-by-store-keepers-group"
        heroku_email: "firalammii@gmail.com"
        health check: "https://"stockManagementSystem.herokuapp.com/actuator/health
